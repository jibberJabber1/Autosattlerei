{"ast":null,"code":"import _classCallCheck from \"D:/Visual Studio Projects/naujas/Autosattlerei/ClientApp/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:/Visual Studio Projects/naujas/Autosattlerei/ClientApp/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport { Injectable, EventEmitter, Component, ChangeDetectorRef, Input, Output, ViewChild, ViewChildren, HostListener, NgModule } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/common';\nvar _c0 = [\"galleryContainer\"];\nvar _c1 = [\"imageElement\"];\n\nfunction GalleryComponent_div_3_img_1_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r10 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"img\", 7, 8);\n    ɵngcc0.ɵɵlistener(\"click\", function GalleryComponent_div_3_img_1_Template_img_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var img_r6 = ctx.$implicit;\n      var ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r9.openImageViewer(img_r6);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var img_r6 = ctx.$implicit;\n    var ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵstyleProp(\"width\", img_r6[\"width\"], \"px\")(\"height\", img_r6[\"height\"], \"px\")(\"background\", img_r6.dominantColor)(\"margin-right\", ctx_r5.calcImageMargin(), \"px\");\n    ɵngcc0.ɵɵproperty(\"src\", img_r6[\"srcAfterFocus\"], ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction GalleryComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(1, GalleryComponent_div_3_img_1_Template, 2, 9, \"img\", 6);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var imgrow_r3 = ctx.$implicit;\n    var ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"margin-bottom\", ctx_r1.calcImageMargin(), \"px\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", imgrow_r3);\n  }\n}\n\nvar _c2 = function _c2(a0) {\n  return {\n    \"inactive\": a0\n  };\n};\n\nfunction GalleryComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r12 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9);\n    ɵngcc0.ɵɵelementStart(1, \"img\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function GalleryComponent_div_5_Template_img_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      var ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ctx_r11.navigate(-1);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"img\", 11);\n    ɵngcc0.ɵɵlistener(\"click\", function GalleryComponent_div_5_Template_img_click_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      var ctx_r13 = ɵngcc0.ɵɵnextContext();\n      return ctx_r13.navigate(1);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(2, _c2, ctx_r2.leftArrowInactive));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(4, _c2, ctx_r2.rightArrowInactive));\n  }\n}\n\nfunction ViewerComponent_div_0_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 9);\n  }\n\n  if (rf & 2) {\n    var img_r3 = ctx.$implicit;\n    var j_r4 = ctx.index;\n    var ctx_r1 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵstyleProp(\"background-image\", img_r3[\"viewerImageLoaded\"] ? \"url(\" + img_r3[ctx_r1.categorySelected][\"path\"] + \")\" : ctx_r1.math.abs(ctx_r1.currentIdx - j_r4) <= 1 ? \"url(\" + img_r3[\"preview_xxs\"][\"path\"] + \")\" : \"\")(\"left\", ctx_r1.transform + \"px\");\n    ɵngcc0.ɵɵclassProp(\"active\", img_r3[\"active\"]);\n    ɵngcc0.ɵɵproperty(\"@imageTransition\", img_r3[\"transition\"]);\n  }\n}\n\nfunction ViewerComponent_div_0_img_7_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"img\", 10);\n    ɵngcc0.ɵɵlistener(\"load\", function ViewerComponent_div_0_img_7_Template_img_load_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      var img_r5 = ctx.$implicit;\n      var ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r7.imageLoaded(img_r5);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var img_r5 = ctx.$implicit;\n    var j_r6 = ctx.index;\n    var ctx_r2 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵpropertyInterpolate(\"src\", ctx_r2.math.abs(ctx_r2.currentIdx - j_r6) <= 1 ? img_r5[ctx_r2.categorySelected][\"path\"] : \"\", ɵngcc0.ɵɵsanitizeUrl);\n  }\n}\n\nvar _c3 = function _c3(a0) {\n  return {\n    \"activeArrow\": a0\n  };\n};\n\nfunction ViewerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r10 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵlistener(\"resize\", function ViewerComponent_div_0_Template_div_resize_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r9 = ɵngcc0.ɵɵnextContext();\n      return ctx_r9.onResize();\n    }, false, ɵngcc0.ɵɵresolveWindow);\n    ɵngcc0.ɵɵelementStart(1, \"img\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function ViewerComponent_div_0_Template_img_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ctx_r11.navigate(-1, false);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"img\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function ViewerComponent_div_0_Template_img_click_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r12 = ɵngcc0.ɵɵnextContext();\n      return ctx_r12.navigate(1, false);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(3, \"div\", 4);\n    ɵngcc0.ɵɵelementStart(4, \"img\", 5);\n    ɵngcc0.ɵɵlistener(\"click\", function ViewerComponent_div_0_Template_img_click_4_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r13 = ɵngcc0.ɵɵnextContext();\n      return ctx_r13.closeViewer();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 6);\n    ɵngcc0.ɵɵlistener(\"click\", function ViewerComponent_div_0_Template_div_click_5_listener() {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r14 = ɵngcc0.ɵɵnextContext();\n      return ctx_r14.showNavigationArrows();\n    })(\"swipeleft\", function ViewerComponent_div_0_Template_div_swipeleft_5_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r15 = ɵngcc0.ɵɵnextContext();\n      return ctx_r15.navigate(1, $event);\n    })(\"swiperight\", function ViewerComponent_div_0_Template_div_swiperight_5_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r16 = ɵngcc0.ɵɵnextContext();\n      return ctx_r16.navigate(-1, $event);\n    })(\"pan\", function ViewerComponent_div_0_Template_div_pan_5_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r10);\n      var ctx_r17 = ɵngcc0.ɵɵnextContext();\n      return ctx_r17.pan($event);\n    });\n    ɵngcc0.ɵɵtemplate(6, ViewerComponent_div_0_div_6_Template, 1, 7, \"div\", 7);\n    ɵngcc0.ɵɵtemplate(7, ViewerComponent_div_0_img_7_Template, 1, 1, \"img\", 8);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"@showViewerTransition\", ctx_r0.showViewer);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(7, _c3, ctx_r0.leftArrowActive))(\"hidden\", !ctx_r0.leftArrowVisible);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpureFunction1(9, _c3, ctx_r0.rightArrowActive))(\"hidden\", !ctx_r0.rightArrowVisible);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.images);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.images);\n  }\n}\n\nvar ImageService = /*#__PURE__*/function () {\n  function ImageService() {\n    _classCallCheck(this, ImageService);\n\n    this.imagesUpdatedSource = new Subject();\n    this.imageSelectedIndexUpdatedSource = new Subject();\n    this.showImageViewerSource = new Subject();\n    this.imagesUpdated$ = this.imagesUpdatedSource.asObservable();\n    this.imageSelectedIndexUpdated$ = this.imageSelectedIndexUpdatedSource.asObservable();\n    this.showImageViewerChanged$ = this.showImageViewerSource.asObservable();\n  }\n  /**\n   * @param {?} images\n   * @return {?}\n   */\n\n\n  _createClass(ImageService, [{\n    key: \"updateImages\",\n    value: function updateImages(images) {\n      this.imagesUpdatedSource.next(images);\n    }\n    /**\n     * @param {?} newIndex\n     * @return {?}\n     */\n\n  }, {\n    key: \"updateSelectedImageIndex\",\n    value: function updateSelectedImageIndex(newIndex) {\n      this.imageSelectedIndexUpdatedSource.next(newIndex);\n    }\n    /**\n     * @param {?} show\n     * @return {?}\n     */\n\n  }, {\n    key: \"showImageViewer\",\n    value: function showImageViewer(show) {\n      this.showImageViewerSource.next(show);\n    }\n  }]);\n\n  return ImageService;\n}();\n\nImageService.ɵfac = function ImageService_Factory(t) {\n  return new (t || ImageService)();\n};\n\nImageService.ɵprov = ɵngcc0.ɵɵdefineInjectable({\n  token: ImageService,\n  factory: ImageService.ɵfac\n});\n/*@__PURE__*/\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(ImageService, [{\n    type: Injectable\n  }], function () {\n    return [];\n  }, null);\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar GalleryComponent = /*#__PURE__*/function () {\n  /**\n   * @param {?} imageService\n   * @param {?} http\n   * @param {?} changeDetectorRef\n   */\n  function GalleryComponent(imageService, http, changeDetectorRef) {\n    _classCallCheck(this, GalleryComponent);\n\n    this.imageService = imageService;\n    this.http = http;\n    this.changeDetectorRef = changeDetectorRef;\n    this.gallery = [];\n    this.imageDataStaticPath = 'assets/img/gallery/';\n    this.imageDataCompletePath = '';\n    this.dataFileName = 'data.json';\n    this.images = [];\n    this.minimalQualityCategory = 'preview_xxs';\n    this.rowIndex = 0;\n    this.rightArrowInactive = false;\n    this.leftArrowInactive = false;\n    this.providedImageMargin = 3;\n    this.providedImageSize = 7;\n    this.providedGalleryName = '';\n    this.providedMetadataUri = undefined;\n    this.rowsPerPage = 200;\n    this.viewerChange = new EventEmitter();\n  }\n  /**\n   * @param {?} event\n   * @return {?}\n   */\n\n\n  _createClass(GalleryComponent, [{\n    key: \"triggerCycle\",\n    value: function triggerCycle(event) {\n      this.scaleGallery();\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"windowResize\",\n    value: function windowResize(event) {\n      this.render();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      this.fetchDataAndRender();\n      this.viewerSubscription = this.imageService.showImageViewerChanged$.subscribe(\n      /**\n      * @param {?} visibility\n      * @return {?}\n      */\n      function (visibility) {\n        return _this.viewerChange.emit(visibility);\n      });\n    }\n    /**\n     * @param {?} changes\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnChanges\",\n    value: function ngOnChanges(changes) {\n      // input params changed\n      if (changes['providedGalleryName'] != undefined) {\n        this.fetchDataAndRender();\n      } else {\n        this.render();\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {\n      if (this.viewerSubscription) {\n        this.viewerSubscription.unsubscribe();\n      }\n    }\n    /**\n     * @param {?} img\n     * @return {?}\n     */\n\n  }, {\n    key: \"openImageViewer\",\n    value: function openImageViewer(img) {\n      this.imageService.updateImages(this.images);\n      this.imageService.updateSelectedImageIndex(this.images.indexOf(img));\n      this.imageService.showImageViewer(true);\n    }\n    /**\n     * direction (-1: left, 1: right)\n     * @param {?} direction\n     * @return {?}\n     */\n\n  }, {\n    key: \"navigate\",\n    value: function navigate(direction) {\n      if (direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage || direction === -1 && this.rowIndex > 0) {\n        this.rowIndex += this.rowsPerPage * direction;\n      }\n\n      this.refreshNavigationErrorState();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"calcImageMargin\",\n    value: function calcImageMargin() {\n      /** @type {?} */\n      var galleryWidth = this.getGalleryWidth();\n      /** @type {?} */\n\n      var ratio = galleryWidth / 1920;\n      return Math.round(Math.max(1, this.providedImageMargin * ratio));\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"fetchDataAndRender\",\n    value: function fetchDataAndRender() {\n      var _this2 = this;\n\n      this.imageDataCompletePath = this.providedMetadataUri;\n\n      if (!this.providedMetadataUri) {\n        this.imageDataCompletePath = this.providedGalleryName !== '' ? \"\".concat(this.imageDataStaticPath + this.providedGalleryName, \"/\").concat(this.dataFileName) : this.imageDataStaticPath + this.dataFileName;\n      }\n\n      this.http.get(this.imageDataCompletePath).subscribe(\n      /**\n      * @param {?} data\n      * @return {?}\n      */\n      function (data) {\n        _this2.images = data;\n\n        _this2.imageService.updateImages(_this2.images);\n\n        _this2.images.forEach(\n        /**\n        * @param {?} image\n        * @return {?}\n        */\n        function (image) {\n          image['galleryImageLoaded'] = false;\n          image['viewerImageLoaded'] = false;\n          image['srcAfterFocus'] = '';\n        }); // twice, single leads to different strange browser behaviour\n\n\n        _this2.render();\n\n        _this2.render();\n      },\n      /**\n      * @param {?} err\n      * @return {?}\n      */\n      function (err) {\n        if (_this2.providedMetadataUri) {\n          console.error(\"Provided endpoint '\".concat(_this2.providedMetadataUri, \"' did not serve metadata correctly or in the expected format.\\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\\n      Original error: \").concat(err));\n        } else {\n          console.error(\"Did you run the convert script from angular2-image-gallery for your images first? Original error: \".concat(err));\n        }\n      },\n      /**\n      * @return {?}\n      */\n      function () {\n        return undefined;\n      });\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.gallery = [];\n      /** @type {?} */\n\n      var tempRow = [this.images[0]];\n      /** @type {?} */\n\n      var currentRowIndex = 0;\n      /** @type {?} */\n\n      var i = 0;\n\n      for (i; i < this.images.length; i++) {\n        while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {\n          i++;\n        }\n\n        if (this.images[i + 1]) {\n          tempRow.pop();\n        }\n\n        this.gallery[currentRowIndex++] = tempRow;\n        tempRow = [this.images[i + 1]];\n      }\n\n      this.scaleGallery();\n    }\n    /**\n     * @private\n     * @param {?} imgRow\n     * @param {?} candidate\n     * @return {?}\n     */\n\n  }, {\n    key: \"shouldAddCandidate\",\n    value: function shouldAddCandidate(imgRow, candidate) {\n      /** @type {?} */\n      var oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);\n      imgRow.push(candidate);\n      /** @type {?} */\n\n      var newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow);\n      return Math.abs(oldDifference) > Math.abs(newDifference);\n    }\n    /**\n     * @private\n     * @param {?} imgRow\n     * @return {?}\n     */\n\n  }, {\n    key: \"calcRowHeight\",\n    value: function calcRowHeight(imgRow) {\n      /** @type {?} */\n      var originalRowWidth = this.calcOriginalRowWidth(imgRow);\n      /** @type {?} */\n\n      var ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth;\n      /** @type {?} */\n\n      var rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio;\n      return rowHeight;\n    }\n    /**\n     * @private\n     * @param {?} imgRow\n     * @return {?}\n     */\n\n  }, {\n    key: \"calcOriginalRowWidth\",\n    value: function calcOriginalRowWidth(imgRow) {\n      var _this3 = this;\n\n      /** @type {?} */\n      var originalRowWidth = 0;\n      imgRow.forEach(\n      /**\n      * @param {?} img\n      * @return {?}\n      */\n      function (img) {\n        /** @type {?} */\n        var individualRatio = _this3.calcIdealHeight() / img[_this3.minimalQualityCategory]['height'];\n\n        img[_this3.minimalQualityCategory]['width'] = img[_this3.minimalQualityCategory]['width'] * individualRatio;\n        img[_this3.minimalQualityCategory]['height'] = _this3.calcIdealHeight();\n        originalRowWidth += img[_this3.minimalQualityCategory]['width'];\n      });\n      return originalRowWidth;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"calcIdealHeight\",\n    value: function calcIdealHeight() {\n      return this.getGalleryWidth() / (80 / this.providedImageSize) + 100;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"getGalleryWidth\",\n    value: function getGalleryWidth() {\n      if (this.galleryContainer.nativeElement.clientWidth === 0) {\n        // for IE11\n        return this.galleryContainer.nativeElement.scrollWidth;\n      }\n\n      return this.galleryContainer.nativeElement.clientWidth;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"scaleGallery\",\n    value: function scaleGallery() {\n      var _this4 = this;\n\n      /** @type {?} */\n      var imageCounter = 0;\n      /** @type {?} */\n\n      var maximumGalleryImageHeight = 0;\n      this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage).forEach(\n      /**\n      * @param {?} imgRow\n      * @return {?}\n      */\n      function (imgRow) {\n        /** @type {?} */\n        var originalRowWidth = _this4.calcOriginalRowWidth(imgRow);\n\n        if (imgRow !== _this4.gallery[_this4.gallery.length - 1]) {\n          /** @type {?} */\n          var ratio = (_this4.getGalleryWidth() - (imgRow.length - 1) * _this4.calcImageMargin()) / originalRowWidth;\n          imgRow.forEach(\n          /**\n          * @param {?} img\n          * @return {?}\n          */\n          function (img) {\n            img['width'] = img[_this4.minimalQualityCategory]['width'] * ratio;\n            img['height'] = img[_this4.minimalQualityCategory]['height'] * ratio;\n            maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);\n\n            _this4.checkForAsyncLoading(img, imageCounter++);\n          });\n        } else {\n          imgRow.forEach(\n          /**\n          * @param {?} img\n          * @return {?}\n          */\n          function (img) {\n            img.width = img[_this4.minimalQualityCategory]['width'];\n            img.height = img[_this4.minimalQualityCategory]['height'];\n            maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height']);\n\n            _this4.checkForAsyncLoading(img, imageCounter++);\n          });\n        }\n      });\n      this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs';\n      this.refreshNavigationErrorState();\n      this.changeDetectorRef.detectChanges();\n    }\n    /**\n     * @private\n     * @param {?} image\n     * @param {?} imageCounter\n     * @return {?}\n     */\n\n  }, {\n    key: \"checkForAsyncLoading\",\n    value: function checkForAsyncLoading(image, imageCounter) {\n      /** @type {?} */\n      var imageElements = this.imageElements.toArray();\n\n      if (image['galleryImageLoaded'] || imageElements.length > 0 && imageElements[imageCounter] && this.isScrolledIntoView(imageElements[imageCounter].nativeElement)) {\n        image['galleryImageLoaded'] = true;\n        image['srcAfterFocus'] = image[this.minimalQualityCategory]['path'];\n      } else {\n        image['srcAfterFocus'] = '';\n      }\n    }\n    /**\n     * @private\n     * @param {?} element\n     * @return {?}\n     */\n\n  }, {\n    key: \"isScrolledIntoView\",\n    value: function isScrolledIntoView(element) {\n      /** @type {?} */\n      var elementTop = element.getBoundingClientRect().top;\n      /** @type {?} */\n\n      var elementBottom = element.getBoundingClientRect().bottom;\n      return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0);\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"refreshNavigationErrorState\",\n    value: function refreshNavigationErrorState() {\n      this.leftArrowInactive = this.rowIndex == 0;\n      this.rightArrowInactive = this.rowIndex > this.gallery.length - this.rowsPerPage;\n    }\n  }]);\n\n  return GalleryComponent;\n}();\n\nGalleryComponent.ɵfac = function GalleryComponent_Factory(t) {\n  return new (t || GalleryComponent)(ɵngcc0.ɵɵdirectiveInject(ImageService), ɵngcc0.ɵɵdirectiveInject(HttpClient), ɵngcc0.ɵɵdirectiveInject(ChangeDetectorRef));\n};\n\nGalleryComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n  type: GalleryComponent,\n  selectors: [[\"gallery\"]],\n  viewQuery: function GalleryComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵstaticViewQuery(_c0, true);\n      ɵngcc0.ɵɵviewQuery(_c1, true);\n    }\n\n    if (rf & 2) {\n      var _t;\n\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.galleryContainer = _t.first);\n      ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.imageElements = _t);\n    }\n  },\n  hostBindings: function GalleryComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"scroll\", function GalleryComponent_scroll_HostBindingHandler($event) {\n        return ctx.triggerCycle($event);\n      }, false, ɵngcc0.ɵɵresolveWindow)(\"resize\", function GalleryComponent_resize_HostBindingHandler($event) {\n        return ctx.windowResize($event);\n      }, false, ɵngcc0.ɵɵresolveWindow);\n    }\n  },\n  inputs: {\n    providedImageMargin: [\"flexBorderSize\", \"providedImageMargin\"],\n    providedImageSize: [\"flexImageSize\", \"providedImageSize\"],\n    providedGalleryName: [\"galleryName\", \"providedGalleryName\"],\n    providedMetadataUri: [\"metadataUri\", \"providedMetadataUri\"],\n    rowsPerPage: [\"maxRowsPerPage\", \"rowsPerPage\"]\n  },\n  outputs: {\n    viewerChange: \"viewerChange\"\n  },\n  features: [ɵngcc0.ɵɵNgOnChangesFeature],\n  decls: 7,\n  vars: 6,\n  consts: [[1, \"galleryContainer\"], [\"galleryContainer\", \"\"], [1, \"innerGalleryContainer\"], [\"class\", \"imagerow\", 3, \"margin-bottom\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"pagerContainer\", 4, \"ngIf\"], [1, \"imagerow\"], [\"class\", \"thumbnail\", 3, \"width\", \"height\", \"src\", \"background\", \"margin-right\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"thumbnail\", 3, \"src\", \"click\"], [\"imageElement\", \"\"], [1, \"pagerContainer\"], [\"src\", \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\", 1, \"pager\", \"left\", 3, \"ngClass\", \"click\"], [\"src\", \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\", 1, \"pager\", \"right\", 3, \"ngClass\", \"click\"]],\n  template: function GalleryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n      ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n      ɵngcc0.ɵɵtemplate(3, GalleryComponent_div_3_Template, 2, 3, \"div\", 3);\n      ɵngcc0.ɵɵpipe(4, \"slice\");\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵtemplate(5, GalleryComponent_div_5_Template, 3, 6, \"div\", 4);\n      ɵngcc0.ɵɵelementEnd();\n      ɵngcc0.ɵɵelement(6, \"viewer\");\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵadvance(3);\n      ɵngcc0.ɵɵproperty(\"ngForOf\", ɵngcc0.ɵɵpipeBind3(4, 2, ctx.gallery, ctx.rowIndex, ctx.rowIndex + ctx.rowsPerPage));\n      ɵngcc0.ɵɵadvance(2);\n      ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.rightArrowInactive || !ctx.leftArrowInactive);\n    }\n  },\n  directives: function directives() {\n    return [ɵngcc1.NgForOf, ɵngcc1.NgIf, ViewerComponent, ɵngcc1.NgClass];\n  },\n  pipes: function pipes() {\n    return [ɵngcc1.SlicePipe];\n  },\n  styles: [\".innerGalleryContainer[_ngcontent-%COMP%]{position:relative}.galleryContainer[_ngcontent-%COMP%]{height:100%;width:100%;overflow:hidden}.innerGalleryContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:last-child{margin-right:-1px!important}.galleryContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:.2s ease-out;cursor:pointer}.imagerow[_ngcontent-%COMP%]{margin-right:1px;overflow:hidden;display:flex}[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.asyncLoadingContainer[_ngcontent-%COMP%]{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer[_ngcontent-%COMP%]{margin:40px auto;width:180px}.pager[_ngcontent-%COMP%]{display:block;height:60px}@media (max-width:700px){.pagerContainer[_ngcontent-%COMP%]{margin:40px auto;width:150px}.pager[_ngcontent-%COMP%]{display:block;height:45px}}.pager.inactive[_ngcontent-%COMP%]{opacity:.15}.pager.left[_ngcontent-%COMP%]{float:left}.pager.right[_ngcontent-%COMP%]{float:right}\"]\n});\n/** @nocollapse */\n\nGalleryComponent.ctorParameters = function () {\n  return [{\n    type: ImageService\n  }, {\n    type: HttpClient\n  }, {\n    type: ChangeDetectorRef\n  }];\n};\n\nGalleryComponent.propDecorators = {\n  providedImageMargin: [{\n    type: Input,\n    args: ['flexBorderSize']\n  }],\n  providedImageSize: [{\n    type: Input,\n    args: ['flexImageSize']\n  }],\n  providedGalleryName: [{\n    type: Input,\n    args: ['galleryName']\n  }],\n  providedMetadataUri: [{\n    type: Input,\n    args: ['metadataUri']\n  }],\n  rowsPerPage: [{\n    type: Input,\n    args: ['maxRowsPerPage']\n  }],\n  viewerChange: [{\n    type: Output\n  }],\n  galleryContainer: [{\n    type: ViewChild,\n    args: ['galleryContainer', {\n      static: true\n    }]\n  }],\n  imageElements: [{\n    type: ViewChildren,\n    args: ['imageElement']\n  }],\n  triggerCycle: [{\n    type: HostListener,\n    args: ['window:scroll', ['$event']]\n  }],\n  windowResize: [{\n    type: HostListener,\n    args: ['window:resize', ['$event']]\n  }]\n};\n/*@__PURE__*/\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(GalleryComponent, [{\n    type: Component,\n    args: [{\n      selector: 'gallery',\n      template: \"<div #galleryContainer class=\\\"galleryContainer\\\">\\n    <div class=\\\"innerGalleryContainer\\\">\\n        <div *ngFor='let imgrow of gallery | slice:rowIndex:rowIndex+rowsPerPage; let i = index'\\n             class=\\\"imagerow\\\"\\n             [style.margin-bottom.px]=\\\"calcImageMargin()\\\">\\n            <img #imageElement\\n                 *ngFor='let img of imgrow; let j = index'\\n                 class=\\\"thumbnail\\\"\\n                 [style.width.px]=\\\"img['width']\\\"\\n                 [style.height.px]=\\\"img['height']\\\"\\n                 (click)=\\\"openImageViewer(img)\\\"\\n                 [src]=\\\"img['srcAfterFocus']\\\"\\n                 [style.background]=\\\"img.dominantColor\\\"\\n                 [style.margin-right.px]=\\\"calcImageMargin()\\\"/>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"pagerContainer\\\" *ngIf=\\\"(!rightArrowInactive || !leftArrowInactive)\\\">\\n        <img [ngClass]=\\\"{'inactive': leftArrowInactive}\\\" class=\\\"pager left\\\"\\n             src=\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNGMwLDExLDksMjAsMjAsMjAgICBjMTEsMCwyMC05LDIwLTIwQzQ0LDEzLDM1LDQsMjQsNHoiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSIyNy42LDM2LjcgMTQuOSwyNCAyNy42LDExLjMgMjkuMSwxMi43IDE3LjgsMjQgMjkuMSwzNS4zICAiLz48L2c+PC9zdmc+\\\"\\n             (click)=\\\"navigate(-1)\\\"/>\\n        <img [ngClass]=\\\"{'inactive': rightArrowInactive}\\\" class=\\\"pager right\\\"\\n             src=\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgaWQ9IkxheWVyXzEiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQ4IDQ4OyIgdmVyc2lvbj0iMS4xIiB2aWV3Qm94PSIwIDAgNDggNDgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnPjxwYXRoIGQ9Ik0yNCw0NkMxMS45LDQ2LDIsMzYuMSwyLDI0UzExLjksMiwyNCwyczIyLDkuOSwyMiwyMlMzNi4xLDQ2LDI0LDQ2eiBNMjQsNEMxMyw0LDQsMTMsNCwyNHM5LDIwLDIwLDIwczIwLTksMjAtMjAgICBTMzUsNCwyNCw0eiIvPjwvZz48Zz48cG9seWdvbiBwb2ludHM9IjIxLjQsMzYuNyAxOS45LDM1LjMgMzEuMiwyNCAxOS45LDEyLjcgMjEuNCwxMS4zIDM0LjEsMjQgICIvPjwvZz48L3N2Zz4=\\\"\\n             (click)=\\\"navigate(1)\\\"/>\\n    </div>\\n</div>\\n\\n<viewer></viewer>\\n\",\n      styles: [\".innerGalleryContainer{position:relative}.galleryContainer{height:100%;width:100%;overflow:hidden}.innerGalleryContainer img:last-child{margin-right:-1px!important}.galleryContainer img:hover{-webkit-filter:brightness(50%);filter:brightness(50%);transition:.2s ease-out;cursor:pointer}.imagerow{margin-right:1px;overflow:hidden;display:flex}::-webkit-scrollbar{display:none}.asyncLoadingContainer{position:absolute;background-color:transparent;height:0;width:0;bottom:120px}.pagerContainer{margin:40px auto;width:180px}.pager{display:block;height:60px}@media (max-width:700px){.pagerContainer{margin:40px auto;width:150px}.pager{display:block;height:45px}}.pager.inactive{opacity:.15}.pager.left{float:left}.pager.right{float:right}\"]\n    }]\n  }], function () {\n    return [{\n      type: ImageService\n    }, {\n      type: HttpClient\n    }, {\n      type: ChangeDetectorRef\n    }];\n  }, {\n    providedImageMargin: [{\n      type: Input,\n      args: ['flexBorderSize']\n    }],\n    providedImageSize: [{\n      type: Input,\n      args: ['flexImageSize']\n    }],\n    providedGalleryName: [{\n      type: Input,\n      args: ['galleryName']\n    }],\n    providedMetadataUri: [{\n      type: Input,\n      args: ['metadataUri']\n    }],\n    rowsPerPage: [{\n      type: Input,\n      args: ['maxRowsPerPage']\n    }],\n    viewerChange: [{\n      type: Output\n    }],\n\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n    triggerCycle: [{\n      type: HostListener,\n      args: ['window:scroll', ['$event']]\n    }],\n\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n    windowResize: [{\n      type: HostListener,\n      args: ['window:resize', ['$event']]\n    }],\n    galleryContainer: [{\n      type: ViewChild,\n      args: ['galleryContainer', {\n        static: true\n      }]\n    }],\n    imageElements: [{\n      type: ViewChildren,\n      args: ['imageElement']\n    }]\n  });\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar ViewerComponent = /*#__PURE__*/function () {\n  /**\n   * @param {?} imageService\n   */\n  function ViewerComponent(imageService) {\n    var _this5 = this;\n\n    _classCallCheck(this, ViewerComponent);\n\n    this.imageService = imageService;\n    this.images = [{}];\n    this.currentIdx = 0;\n    this.leftArrowVisible = true;\n    this.rightArrowVisible = true;\n    this.categorySelected = 'preview_xxs';\n    this.qualitySelectorShown = false;\n    this.qualitySelected = 'auto';\n    imageService.imagesUpdated$.subscribe(\n    /**\n    * @param {?} images\n    * @return {?}\n    */\n    function (images) {\n      _this5.images = images;\n    });\n    imageService.imageSelectedIndexUpdated$.subscribe(\n    /**\n    * @param {?} newIndex\n    * @return {?}\n    */\n    function (newIndex) {\n      _this5.currentIdx = newIndex;\n\n      _this5.images.forEach(\n      /**\n      * @param {?} image\n      * @return {?}\n      */\n      function (image) {\n        return image['active'] = false;\n      });\n\n      _this5.images[_this5.currentIdx]['active'] = true;\n      _this5.transform = 0;\n\n      _this5.updateQuality();\n    });\n    imageService.showImageViewerChanged$.subscribe(\n    /**\n    * @param {?} showViewer\n    * @return {?}\n    */\n    function (showViewer) {\n      _this5.showViewer = showViewer;\n    });\n    this.math = Math;\n  }\n  /**\n   * @return {?}\n   */\n\n\n  _createClass(ViewerComponent, [{\n    key: \"pan\",\n\n    /**\n     * @param {?} swipe\n     * @return {?}\n     */\n    value: function pan(swipe) {\n      this.transform = swipe.deltaX;\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"onResize\",\n    value: function onResize() {\n      this.images.forEach(\n      /**\n      * @param {?} image\n      * @return {?}\n      */\n      function (image) {\n        image['viewerImageLoaded'] = false;\n        image['active'] = false;\n      });\n      this.updateImage();\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"showQualitySelector\",\n    value: function showQualitySelector() {\n      this.qualitySelectorShown = !this.qualitySelectorShown;\n    }\n    /**\n     * @param {?} newQuality\n     * @return {?}\n     */\n\n  }, {\n    key: \"qualityChanged\",\n    value: function qualityChanged(newQuality) {\n      this.qualitySelected = newQuality;\n      this.updateImage();\n    }\n    /**\n     * @param {?} image\n     * @return {?}\n     */\n\n  }, {\n    key: \"imageLoaded\",\n    value: function imageLoaded(image) {\n      image['viewerImageLoaded'] = true;\n    }\n    /**\n     * direction (-1: left, 1: right)\n     * swipe (user swiped)\n     * @param {?} direction\n     * @param {?} swipe\n     * @return {?}\n     */\n\n  }, {\n    key: \"navigate\",\n    value: function navigate(direction, swipe) {\n      if (direction === 1 && this.currentIdx < this.images.length - 1 || direction === -1 && this.currentIdx > 0) {\n        if (direction == -1) {\n          this.images[this.currentIdx]['transition'] = 'leaveToRight';\n          this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft';\n        } else {\n          this.images[this.currentIdx]['transition'] = 'leaveToLeft';\n          this.images[this.currentIdx + 1]['transition'] = 'enterFromRight';\n        }\n\n        this.currentIdx += direction;\n\n        if (swipe) {\n          this.hideNavigationArrows();\n        } else {\n          this.showNavigationArrows();\n        }\n\n        this.updateImage();\n      }\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"showNavigationArrows\",\n    value: function showNavigationArrows() {\n      this.leftArrowVisible = true;\n      this.rightArrowVisible = true;\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"closeViewer\",\n    value: function closeViewer() {\n      this.images.forEach(\n      /**\n      * @param {?} image\n      * @return {?}\n      */\n      function (image) {\n        return image['transition'] = undefined;\n      });\n      this.images.forEach(\n      /**\n      * @param {?} image\n      * @return {?}\n      */\n      function (image) {\n        return image['active'] = false;\n      });\n      this.imageService.showImageViewer(false);\n    }\n    /**\n     * @param {?} event\n     * @return {?}\n     */\n\n  }, {\n    key: \"onKeydown\",\n    value: function onKeydown(event) {\n      /** @type {?} */\n      var prevent = [37, 39, 27, 36, 35].find(\n      /**\n      * @param {?} no\n      * @return {?}\n      */\n      function (no) {\n        return no === event.keyCode;\n      });\n\n      if (prevent) {\n        event.preventDefault();\n      }\n\n      switch (prevent) {\n        case 37:\n          // navigate left\n          this.navigate(-1, false);\n          break;\n\n        case 39:\n          // navigate right\n          this.navigate(1, false);\n          break;\n\n        case 27:\n          // esc\n          this.closeViewer();\n          break;\n\n        case 36:\n          // pos 1\n          this.images[this.currentIdx]['transition'] = 'leaveToRight';\n          this.currentIdx = 0;\n          this.images[this.currentIdx]['transition'] = 'enterFromLeft';\n          this.updateImage();\n          break;\n\n        case 35:\n          // end\n          this.images[this.currentIdx]['transition'] = 'leaveToLeft';\n          this.currentIdx = this.images.length - 1;\n          this.images[this.currentIdx]['transition'] = 'enterFromRight';\n          this.updateImage();\n          break;\n\n        default:\n          break;\n      }\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"hideNavigationArrows\",\n    value: function hideNavigationArrows() {\n      this.leftArrowVisible = false;\n      this.rightArrowVisible = false;\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"updateImage\",\n    value: function updateImage() {\n      var _this6 = this;\n\n      // wait for animation to end\n      setTimeout(\n      /**\n      * @return {?}\n      */\n      function () {\n        _this6.updateQuality();\n\n        _this6.images[_this6.currentIdx]['active'] = true;\n\n        _this6.images.forEach(\n        /**\n        * @param {?} image\n        * @return {?}\n        */\n        function (image) {\n          if (image != _this6.images[_this6.currentIdx]) {\n            image['active'] = false;\n            _this6.transform = 0;\n          }\n        });\n      }, 500);\n    }\n    /**\n     * @private\n     * @return {?}\n     */\n\n  }, {\n    key: \"updateQuality\",\n    value: function updateQuality() {\n      /** @type {?} */\n      var screenWidth = window.innerWidth;\n      /** @type {?} */\n\n      var screenHeight = window.innerHeight;\n\n      switch (this.qualitySelected) {\n        case 'auto':\n          {\n            this.categorySelected = 'preview_xxs';\n\n            if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width && screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {\n              this.categorySelected = 'preview_xs';\n            }\n\n            if (screenWidth > this.images[this.currentIdx]['preview_xs'].width && screenHeight > this.images[this.currentIdx]['preview_xs'].height) {\n              this.categorySelected = 'preview_s';\n            }\n\n            if (screenWidth > this.images[this.currentIdx]['preview_s'].width && screenHeight > this.images[this.currentIdx]['preview_s'].height) {\n              this.categorySelected = 'preview_m';\n            }\n\n            if (screenWidth > this.images[this.currentIdx]['preview_m'].width && screenHeight > this.images[this.currentIdx]['preview_m'].height) {\n              this.categorySelected = 'preview_l';\n            }\n\n            if (screenWidth > this.images[this.currentIdx]['preview_l'].width && screenHeight > this.images[this.currentIdx]['preview_l'].height) {\n              this.categorySelected = 'preview_xl';\n            }\n\n            if (screenWidth > this.images[this.currentIdx]['preview_xl'].width && screenHeight > this.images[this.currentIdx]['preview_xl'].height) {\n              this.categorySelected = 'raw';\n            }\n\n            break;\n          }\n\n        case 'low':\n          {\n            this.categorySelected = 'preview_xxs';\n            break;\n          }\n\n        case 'mid':\n          {\n            this.categorySelected = 'preview_m';\n            break;\n          }\n\n        case 'high':\n          {\n            this.categorySelected = 'raw';\n            break;\n          }\n\n        default:\n          {\n            this.categorySelected = 'preview_m';\n          }\n      }\n    }\n  }, {\n    key: \"leftArrowActive\",\n    get: function get() {\n      return this.currentIdx > 0;\n    }\n    /**\n     * @return {?}\n     */\n\n  }, {\n    key: \"rightArrowActive\",\n    get: function get() {\n      return this.currentIdx < this.images.length - 1;\n    }\n  }]);\n\n  return ViewerComponent;\n}();\n\nViewerComponent.ɵfac = function ViewerComponent_Factory(t) {\n  return new (t || ViewerComponent)(ɵngcc0.ɵɵdirectiveInject(ImageService));\n};\n\nViewerComponent.ɵcmp = ɵngcc0.ɵɵdefineComponent({\n  type: ViewerComponent,\n  selectors: [[\"viewer\"]],\n  hostBindings: function ViewerComponent_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"keydown\", function ViewerComponent_keydown_HostBindingHandler($event) {\n        return ctx.onKeydown($event);\n      }, false, ɵngcc0.ɵɵresolveDocument);\n    }\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"outerContainer\", 3, \"resize\", 4, \"ngIf\"], [1, \"outerContainer\", 3, \"resize\"], [\"src\", \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\", 1, \"arrow\", \"left\", 3, \"ngClass\", \"hidden\", \"click\"], [\"src\", \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\", 1, \"arrow\", \"right\", 3, \"ngClass\", \"hidden\", \"click\"], [1, \"buttonContainer\"], [\"src\", \"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\", 1, \"action\", \"close\", 3, \"click\"], [1, \"imageContainer\", 3, \"click\", \"swipeleft\", \"swiperight\", \"pan\"], [\"class\", \"image\", 3, \"active\", \"background-image\", \"left\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"preloading-image\", 3, \"src\", \"load\", 4, \"ngFor\", \"ngForOf\"], [1, \"image\"], [1, \"preloading-image\", 3, \"src\", \"load\"]],\n  template: function ViewerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵtemplate(0, ViewerComponent_div_0_Template, 8, 11, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showViewer);\n    }\n  },\n  directives: [ɵngcc1.NgIf, ɵngcc1.NgClass, ɵngcc1.NgForOf],\n  styles: [\".outerContainer[_ngcontent-%COMP%]{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer[_ngcontent-%COMP%]{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%], .imageContainer[_ngcontent-%COMP%]   .preloading-image[_ngcontent-%COMP%]{visibility:hidden}.imageContainer[_ngcontent-%COMP%]   .image.active[_ngcontent-%COMP%]{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow[_ngcontent-%COMP%]{opacity:0}.arrow[_ngcontent-%COMP%]:hover{cursor:pointer}.outerContainer[_ngcontent-%COMP%]:hover   .arrow.activeArrow[_ngcontent-%COMP%]{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:.5s ease-out}.arrow.left[_ngcontent-%COMP%]{left:2vw}.arrow.right[_ngcontent-%COMP%]{right:2vw}.arrow[_ngcontent-%COMP%]:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:.5s ease-out}.buttonContainer[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:.5s ease-out}.buttonContainer[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{height:100%;cursor:pointer;vertical-align:top}.buttonContainer[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:focus{outline:0}.buttonContainer[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]:hover{background-color:#222;transition:.3s ease-out}.buttonContainer[_ngcontent-%COMP%]   .action.close[_ngcontent-%COMP%]{width:26px;height:26px}md-button-toggle.checked[_ngcontent-%COMP%]{background-color:#a0a0a0}.menuButton[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:.5s ease-out}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons[_ngcontent-%COMP%]{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}\"],\n  data: {\n    animation: [trigger('imageTransition', [state('enterFromRight', style({\n      opacity: 1,\n      transform: 'translate(0px, 0px)'\n    })), state('enterFromLeft', style({\n      opacity: 1,\n      transform: 'translate(0px, 0px)'\n    })), state('leaveToLeft', style({\n      opacity: 0,\n      transform: 'translate(-100px, 0px)'\n    })), state('leaveToRight', style({\n      opacity: 0,\n      transform: 'translate(100px, 0px)'\n    })), transition('* => enterFromRight', [style({\n      opacity: 0,\n      transform: 'translate(30px, 0px)'\n    }), animate('250ms 500ms ease-in')]), transition('* => enterFromLeft', [style({\n      opacity: 0,\n      transform: 'translate(-30px, 0px)'\n    }), animate('250ms 500ms ease-in')]), transition('* => leaveToLeft', [style({\n      opacity: 1\n    }), animate('250ms ease-out')]), transition('* => leaveToRight', [style({\n      opacity: 1\n    }), animate('250ms ease-out')])]), trigger('showViewerTransition', [state('true', style({\n      opacity: 1\n    })), state('void', style({\n      opacity: 0\n    })), transition('void => *', [style({\n      opacity: 0\n    }), animate('1000ms ease-in')]), transition('* => void', [style({\n      opacity: 1\n    }), animate('500ms ease-out')])])]\n  }\n});\n/** @nocollapse */\n\nViewerComponent.ctorParameters = function () {\n  return [{\n    type: ImageService\n  }];\n};\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(ViewerComponent, [{\n    type: Component,\n    args: [{\n      selector: 'viewer',\n      template: \"<div class=\\\"outerContainer\\\" (window:resize)=\\\"onResize()\\\" *ngIf=\\\"showViewer\\\" [@showViewerTransition]=\\\"showViewer\\\">\\n\\n\\n    <img [ngClass]=\\\"{'activeArrow': leftArrowActive}\\\" class=\\\"arrow left\\\"\\n         src=\\\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPiAgIDxnIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCIgaWQ9Im1pdSIgc3Ryb2tlPSIjNTU1IiBzdHJva2Utd2lkdGg9IjAuMiI+ICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTM5NS4wMDAwMDAsIC0xOTEuMDAwMDAwKSI+PGcgaWQ9InNsaWNlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyMTUuMDAwMDAwLCAxMTkuMDAwMDAwKSIvPjxwYXRoICAgICAgIGQ9Ik0zOTYsMjAyLjUgQzM5NiwxOTYuMTQ4NzI1IDQwMS4xNDg3MjUsMTkxIDQwNy41LDE5MSBDNDEzLjg1MTI3NSwxOTEgNDE5LDE5Ni4xNDg3MjUgNDE5LDIwMi41IEM0MTksMjA4Ljg1MTI3NSA0MTMuODUxMjc1LDIxNCA0MDcuNSwyMTQgQzQwMS4xNDg3MjUsMjE0IDM5NiwyMDguODUxMjc1IDM5NiwyMDIuNSBaIE00MDguNjU2ODU0LDE5Ni44NDMxNDYgTDQxMC4wNzEwNjgsMTk4LjI1NzM1OSBMNDA1LjgyODQyNywyMDIuNSBMNDEwLjA3MTA2OCwyMDYuNzQyNjQxIEw0MDguNjU2ODU0LDIwOC4xNTY4NTQgTDQwMywyMDIuNSBMNDA4LjY1Njg1NCwxOTYuODQzMTQ2IFoiICAgICAgIGZpbGw9IiNhYWEiICAgICAgIGlkPSJjaXJjbGUtYmFjay1hcnJvdy1nbHlwaCIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\\\"\\n         [hidden]=\\\"!leftArrowVisible\\\" (click)=\\\"navigate(-1, false)\\\"/>\\n    <img [ngClass]=\\\"{'activeArrow': rightArrowActive}\\\" class=\\\"arrow right\\\"\\n         src=\\\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjI0cHgiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjx0aXRsZS8+PGRlc2MvPjxkZWZzLz4gICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGlkPSJtaXUiIHN0cm9rZT0iIzU1NSIgc3Ryb2tlLXdpZHRoPSIwLjIiPiAgICAgPGcgaWQ9IkFydGJvYXJkLTEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC00NjcuMDAwMDAwLCAtMTkxLjAwMDAwMCkiPjxnIGlkPSJzbGljZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjE1LjAwMDAwMCwgMTE5LjAwMDAwMCkiLz48cGF0aCAgICAgICBkPSJNNDY4LDIwMi41IEM0NjgsMTk2LjE0ODcyNSA0NzMuMTQ4NzI1LDE5MSA0NzkuNSwxOTEgQzQ4NS44NTEyNzUsMTkxIDQ5MSwxOTYuMTQ4NzI1IDQ5MSwyMDIuNSBDNDkxLDIwOC44NTEyNzUgNDg1Ljg1MTI3NSwyMTQgNDc5LjUsMjE0IEM0NzMuMTQ4NzI1LDIxNCA0NjgsMjA4Ljg1MTI3NSA0NjgsMjAyLjUgWiBNNDgwLjY1Njg1NCwxOTYuODQzMTQ2IEw0ODIuMDcxMDY4LDE5OC4yNTczNTkgTDQ3Ny44Mjg0MjcsMjAyLjUgTDQ4Mi4wNzEwNjgsMjA2Ljc0MjY0MSBMNDgwLjY1Njg1NCwyMDguMTU2ODU0IEw0NzUsMjAyLjUgTDQ4MC42NTY4NTQsMTk2Ljg0MzE0NiBaIiAgICAgICBmaWxsPSIjYWFhIiAgICAgICBpZD0iY2lyY2xlLW5leHQtYXJyb3ctZGlzY2xvc3VyZS1nbHlwaCIgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNDc5LjUwMDAwMCwgMjAyLjUwMDAwMCkgc2NhbGUoLTEsIDEpIHRyYW5zbGF0ZSgtNDc5LjUwMDAwMCwgLTIwMi41MDAwMDApICIvPjwvZz4gICA8L2c+IDwvc3ZnPg==\\\"\\n         [hidden]=\\\"!rightArrowVisible\\\" (click)=\\\"navigate(1, false)\\\"/>\\n\\n    <div class=\\\"buttonContainer\\\">\\n        <img class=\\\"action close\\\"\\n             src=\\\"data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjMwcHgiIGlkPSJMYXllcl8xIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MTIgNTEyOyIgdmVyc2lvbj0iMS4xIiBmaWxsPSIjYWFhIiB2aWV3Qm94PSIwIDAgNTEyIDUxMiIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgPHBhdGggICAgc3Ryb2tlLXdpZHRoPSIzMCIgc3Ryb2tlPSIjNDQ0IiAgICBkPSJNNDM3LjUsMzg2LjZMMzA2LjksMjU2bDEzMC42LTEzMC42YzE0LjEtMTQuMSwxNC4xLTM2LjgsMC01MC45Yy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMEwyNTYsMjA1LjFMMTI1LjQsNzQuNSAgYy0xNC4xLTE0LjEtMzYuOC0xNC4xLTUwLjksMGMtMTQuMSwxNC4xLTE0LjEsMzYuOCwwLDUwLjlMMjA1LjEsMjU2TDc0LjUsMzg2LjZjLTE0LjEsMTQuMS0xNC4xLDM2LjgsMCw1MC45ICBjMTQuMSwxNC4xLDM2LjgsMTQuMSw1MC45LDBMMjU2LDMwNi45bDEzMC42LDEzMC42YzE0LjEsMTQuMSwzNi44LDE0LjEsNTAuOSwwQzQ1MS41LDQyMy40LDQ1MS41LDQwMC42LDQzNy41LDM4Ni42eiIvPjwvc3ZnPg==\\\"\\n             (click)=\\\"closeViewer()\\\"/>\\n    </div>\\n\\n    <div class=\\\"imageContainer\\\"\\n         (click)=\\\"showNavigationArrows()\\\"\\n         (swipeleft)=\\\"navigate(1, $event)\\\"\\n         (swiperight)=\\\"navigate(-1, $event)\\\"\\n         (pan)=\\\"pan($event)\\\">\\n\\n        <div *ngFor='let img of images; let j = index'\\n             class=\\\"image\\\"\\n             [class.active]=\\\"img['active']\\\"\\n             [style.background-image]=\\\"img['viewerImageLoaded'] ? 'url('+img[categorySelected]['path']+')' : math.abs(currentIdx-j) <=1 ? 'url('+img['preview_xxs']['path']+')' : ''\\\"\\n             [style.left]=\\\"transform+'px'\\\"\\n             [@imageTransition]=\\\"img['transition']\\\"></div>\\n\\n        <img *ngFor='let img of images; let j = index'\\n             class=\\\"preloading-image\\\"\\n             (load)=\\\"imageLoaded(img)\\\"\\n             src=\\\"{{ math.abs(currentIdx-j) <=1 ? img[categorySelected]['path'] : ''}}\\\"/>\\n    </div>\\n</div>\\n\\n\",\n      host: {\n        '(document:keydown)': 'onKeydown($event)'\n      },\n      animations: [trigger('imageTransition', [state('enterFromRight', style({\n        opacity: 1,\n        transform: 'translate(0px, 0px)'\n      })), state('enterFromLeft', style({\n        opacity: 1,\n        transform: 'translate(0px, 0px)'\n      })), state('leaveToLeft', style({\n        opacity: 0,\n        transform: 'translate(-100px, 0px)'\n      })), state('leaveToRight', style({\n        opacity: 0,\n        transform: 'translate(100px, 0px)'\n      })), transition('* => enterFromRight', [style({\n        opacity: 0,\n        transform: 'translate(30px, 0px)'\n      }), animate('250ms 500ms ease-in')]), transition('* => enterFromLeft', [style({\n        opacity: 0,\n        transform: 'translate(-30px, 0px)'\n      }), animate('250ms 500ms ease-in')]), transition('* => leaveToLeft', [style({\n        opacity: 1\n      }), animate('250ms ease-out')]), transition('* => leaveToRight', [style({\n        opacity: 1\n      }), animate('250ms ease-out')])]), trigger('showViewerTransition', [state('true', style({\n        opacity: 1\n      })), state('void', style({\n        opacity: 0\n      })), transition('void => *', [style({\n        opacity: 0\n      }), animate('1000ms ease-in')]), transition('* => void', [style({\n        opacity: 1\n      }), animate('500ms ease-out')])])],\n      styles: [\".outerContainer{top:0;bottom:0;left:0;right:0;height:100%;width:100%;position:fixed;background-color:rgba(0,0,0,.95);font-family:sans-serif;z-index:1031}.imageContainer{position:absolute;float:none;top:0;bottom:0;left:0;right:0}.imageContainer .image,.imageContainer .preloading-image{visibility:hidden}.imageContainer .image.active{position:absolute;visibility:visible;background-repeat:no-repeat;background-size:contain;background-position:center;margin:auto;left:0;right:0;top:0;bottom:0;height:100%;width:100%;opacity:1}.arrow{opacity:0}.arrow:hover{cursor:pointer}.outerContainer:hover .arrow.activeArrow{height:calc(20px + 1.5vw);position:absolute;top:calc(50% - (20px + 1.5vw)/ 2);bottom:50%;z-index:1;opacity:1;transition:.5s ease-out}.arrow.left{left:2vw}.arrow.right{right:2vw}.arrow:not(.activeArrow):hover{opacity:0;cursor:pointer;transition:.5s ease-out}.buttonContainer{position:absolute;top:20px;right:20px;height:20px;text-align:center;opacity:1;z-index:200;transition:.5s ease-out}.buttonContainer .action{height:100%;cursor:pointer;vertical-align:top}.buttonContainer .action:focus{outline:0}.buttonContainer .action:hover{background-color:#222;transition:.3s ease-out}.buttonContainer .action.close{width:26px;height:26px}md-button-toggle.checked{background-color:#a0a0a0}.menuButton{position:absolute;bottom:20px;right:20px;text-align:center;opacity:1;z-index:200;transition:.5s ease-out}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:local('Material Icons'),local('MaterialIcons-Regular'),url(https://fonts.gstatic.com/s/materialicons/v19/2fcrYFNaTjcS6g4U3t-Y5ZjZjT5FdEJ140U2DJYC3mY.woff2) format('woff2')}.material-icons{font-family:'Material Icons';font-weight:400;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}\"]\n    }]\n  }], function () {\n    return [{\n      type: ImageService\n    }];\n  }, null);\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nvar Angular2ImageGalleryModule = function Angular2ImageGalleryModule() {\n  _classCallCheck(this, Angular2ImageGalleryModule);\n};\n\nAngular2ImageGalleryModule.ɵmod = ɵngcc0.ɵɵdefineNgModule({\n  type: Angular2ImageGalleryModule\n});\nAngular2ImageGalleryModule.ɵinj = ɵngcc0.ɵɵdefineInjector({\n  factory: function Angular2ImageGalleryModule_Factory(t) {\n    return new (t || Angular2ImageGalleryModule)();\n  },\n  providers: [ImageService],\n  imports: [[CommonModule, FormsModule, HttpClientModule, BrowserAnimationsModule]]\n});\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(Angular2ImageGalleryModule, {\n    declarations: function declarations() {\n      return [GalleryComponent, ViewerComponent];\n    },\n    imports: function imports() {\n      return [CommonModule, FormsModule, HttpClientModule, BrowserAnimationsModule];\n    },\n    exports: function exports() {\n      return [GalleryComponent, ViewerComponent];\n    }\n  });\n})();\n/*@__PURE__*/\n\n\n(function () {\n  ɵngcc0.ɵsetClassMetadata(Angular2ImageGalleryModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule, FormsModule, HttpClientModule, BrowserAnimationsModule],\n      declarations: [GalleryComponent, ViewerComponent],\n      providers: [ImageService],\n      exports: [GalleryComponent, ViewerComponent]\n    }]\n  }], null, null);\n})();\n\nexport { Angular2ImageGalleryModule, GalleryComponent, ImageService, ViewerComponent };","map":{"version":3,"sources":["angular2-image-gallery/lib/services/image.service.ts","angular2-image-gallery/lib/gallery/gallery.component.ts","angular2-image-gallery/lib/viewer/viewer.component.ts","angular2-image-gallery/lib/angular2-image-gallery.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core'\nimport { Observable, Subject } from 'rxjs'\n\n@Injectable()\nexport class ImageService {\n    private imagesUpdatedSource = new Subject<Array<any>>()\n    private imageSelectedIndexUpdatedSource = new Subject<number>()\n    private showImageViewerSource = new Subject<boolean>()\n\n    imagesUpdated$: Observable<Array<any>> = this.imagesUpdatedSource.asObservable()\n    imageSelectedIndexUpdated$: Observable<number> = this.imageSelectedIndexUpdatedSource.asObservable()\n    showImageViewerChanged$: Observable<boolean> = this.showImageViewerSource.asObservable()\n\n    updateImages(images: Array<any>): void {\n        this.imagesUpdatedSource.next(images)\n    }\n\n    updateSelectedImageIndex(newIndex: number): void {\n        this.imageSelectedIndexUpdatedSource.next(newIndex)\n    }\n\n    showImageViewer(show: boolean): void {\n        this.showImageViewerSource.next(show)\n    }\n}\n","import {\n  ChangeDetectorRef, Component, ElementRef, EventEmitter, HostListener,\n  Input, OnChanges, OnDestroy, OnInit, Output, QueryList, SimpleChanges, ViewChild, ViewChildren\n} from '@angular/core'\nimport { ImageService } from '../services/image.service'\nimport { Subscription } from 'rxjs/internal/Subscription'\nimport { HttpClient } from '@angular/common/http'\n\n@Component({\n    selector: 'gallery',\n    templateUrl: './gallery.component.html',\n    styleUrls: ['./gallery.component.css']\n})\nexport class GalleryComponent implements OnInit, OnDestroy, OnChanges {\n    gallery: Array<any> = []\n    imageDataStaticPath: string = 'assets/img/gallery/'\n    imageDataCompletePath: string = ''\n    dataFileName: string = 'data.json'\n    images: Array<any> = []\n    minimalQualityCategory = 'preview_xxs'\n    viewerSubscription: Subscription\n    rowIndex: number = 0\n    rightArrowInactive: boolean = false\n    leftArrowInactive: boolean = false\n\n    @Input('flexBorderSize') providedImageMargin: number = 3\n    @Input('flexImageSize') providedImageSize: number = 7\n    @Input('galleryName') providedGalleryName: string = ''\n    @Input('metadataUri') providedMetadataUri: string = undefined\n    @Input('maxRowsPerPage') rowsPerPage: number = 200\n\n    @Output() viewerChange = new EventEmitter<boolean>()\n\n    @ViewChild('galleryContainer', { static: true }) galleryContainer: ElementRef\n    @ViewChildren('imageElement') imageElements: QueryList<any>\n\n    @HostListener('window:scroll', ['$event']) triggerCycle(event: any): void {\n        this.scaleGallery()\n    }\n\n    @HostListener('window:resize', ['$event']) windowResize(event: any): void {\n        this.render()\n    }\n\n    constructor(public imageService: ImageService, public http: HttpClient, public changeDetectorRef: ChangeDetectorRef) {\n    }\n\n    ngOnInit(): void {\n        this.fetchDataAndRender()\n        this.viewerSubscription = this.imageService.showImageViewerChanged$\n            .subscribe((visibility: boolean) => this.viewerChange.emit(visibility))\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        // input params changed\n        if (changes['providedGalleryName'] != undefined) {\n            this.fetchDataAndRender()\n        } else {\n            this.render()\n        }\n    }\n\n    ngOnDestroy(): void {\n        if (this.viewerSubscription) {\n            this.viewerSubscription.unsubscribe()\n        }\n    }\n\n    openImageViewer(img: any): void {\n        this.imageService.updateImages(this.images)\n        this.imageService.updateSelectedImageIndex(this.images.indexOf(img))\n        this.imageService.showImageViewer(true)\n    }\n\n    /**\n     * direction (-1: left, 1: right)\n     */\n    navigate(direction: number): void {\n        if ((direction === 1 && this.rowIndex < this.gallery.length - this.rowsPerPage)\n            || (direction === -1 && this.rowIndex > 0)) {\n            this.rowIndex += (this.rowsPerPage * direction)\n        }\n        this.refreshNavigationErrorState()\n    }\n\n    calcImageMargin(): number {\n        const galleryWidth = this.getGalleryWidth()\n        const ratio = galleryWidth / 1920\n        return Math.round(Math.max(1, this.providedImageMargin * ratio))\n    }\n\n    private fetchDataAndRender(): void {\n        this.imageDataCompletePath = this.providedMetadataUri\n\n        if (!this.providedMetadataUri) {\n            this.imageDataCompletePath = this.providedGalleryName !== '' ?\n                `${this.imageDataStaticPath + this.providedGalleryName}/${this.dataFileName}` :\n                this.imageDataStaticPath + this.dataFileName\n        }\n\n        this.http.get(this.imageDataCompletePath)\n          .subscribe(\n            (data: Array<any>) => {\n                    this.images = data\n                    this.imageService.updateImages(this.images)\n\n                    this.images.forEach(image => {\n                      image['galleryImageLoaded'] = false\n                      image['viewerImageLoaded'] = false\n                      image['srcAfterFocus'] = ''\n                    })\n                    // twice, single leads to different strange browser behaviour\n                    this.render()\n                    this.render()\n                },\n              err => {\n                    if (this.providedMetadataUri) {\n                      console.error(`Provided endpoint '${this.providedMetadataUri}' did not serve metadata correctly or in the expected format.\n      See here for more information: https://github.com/BenjaminBrandmeier/angular2-image-gallery/blob/master/docs/externalDataSource.md,\n      Original error: ${err}`)\n                    } else {\n                        console.error(`Did you run the convert script from angular2-image-gallery for your images first? Original error: ${err}`)\n                    }\n              },\n            () => undefined)\n    }\n\n    private render(): void {\n        this.gallery = []\n\n        let tempRow = [this.images[0]]\n        let currentRowIndex = 0\n        let i = 0\n\n        for (i; i < this.images.length; i++) {\n            while (this.images[i + 1] && this.shouldAddCandidate(tempRow, this.images[i + 1])) {\n                i++\n            }\n            if (this.images[i + 1]) {\n                tempRow.pop()\n            }\n            this.gallery[currentRowIndex++] = tempRow\n\n            tempRow = [this.images[i + 1]]\n        }\n\n        this.scaleGallery()\n    }\n\n    private shouldAddCandidate(imgRow: Array<any>, candidate: any): boolean {\n        const oldDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\n        imgRow.push(candidate)\n        const newDifference = this.calcIdealHeight() - this.calcRowHeight(imgRow)\n\n        return Math.abs(oldDifference) > Math.abs(newDifference)\n    }\n\n    private calcRowHeight(imgRow: Array<any>): number {\n        const originalRowWidth = this.calcOriginalRowWidth(imgRow)\n\n        const ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth\n        const rowHeight = imgRow[0][this.minimalQualityCategory]['height'] * ratio\n\n        return rowHeight\n    }\n\n    private calcOriginalRowWidth(imgRow: Array<any>): number {\n        let originalRowWidth = 0\n        imgRow.forEach(img => {\n            const individualRatio = this.calcIdealHeight() / img[this.minimalQualityCategory]['height']\n            img[this.minimalQualityCategory]['width'] = img[this.minimalQualityCategory]['width'] * individualRatio\n            img[this.minimalQualityCategory]['height'] = this.calcIdealHeight()\n            originalRowWidth += img[this.minimalQualityCategory]['width']\n        })\n\n        return originalRowWidth\n    }\n\n    private calcIdealHeight(): number {\n        return this.getGalleryWidth() / (80 / this.providedImageSize) + 100\n    }\n\n    private getGalleryWidth(): number {\n        if (this.galleryContainer.nativeElement.clientWidth === 0) {\n            // for IE11\n            return this.galleryContainer.nativeElement.scrollWidth\n        }\n        return this.galleryContainer.nativeElement.clientWidth\n    }\n\n    private scaleGallery(): void {\n        let imageCounter = 0\n        let maximumGalleryImageHeight = 0\n\n        this.gallery.slice(this.rowIndex, this.rowIndex + this.rowsPerPage)\n          .forEach(imgRow => {\n            const originalRowWidth = this.calcOriginalRowWidth(imgRow)\n\n            if (imgRow !== this.gallery[this.gallery.length - 1]) {\n                const ratio = (this.getGalleryWidth() - (imgRow.length - 1) * this.calcImageMargin()) / originalRowWidth\n\n                imgRow.forEach((img: any) => {\n                    img['width'] = img[this.minimalQualityCategory]['width'] * ratio\n                    img['height'] = img[this.minimalQualityCategory]['height'] * ratio\n                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height'])\n                    this.checkForAsyncLoading(img, imageCounter++)\n                })\n            } else {\n                imgRow.forEach((img: any) => {\n                    img.width = img[this.minimalQualityCategory]['width']\n                    img.height = img[this.minimalQualityCategory]['height']\n                    maximumGalleryImageHeight = Math.max(maximumGalleryImageHeight, img['height'])\n                    this.checkForAsyncLoading(img, imageCounter++)\n                })\n            }\n        })\n\n        this.minimalQualityCategory = maximumGalleryImageHeight > 375 ? 'preview_xs' : 'preview_xxs'\n        this.refreshNavigationErrorState()\n\n        this.changeDetectorRef.detectChanges()\n    }\n\n    private checkForAsyncLoading(image: any, imageCounter: number): void {\n        const imageElements = this.imageElements.toArray()\n\n        if (image['galleryImageLoaded'] ||\n            (imageElements.length > 0 &&\n              imageElements[imageCounter] &&\n              this.isScrolledIntoView(imageElements[imageCounter].nativeElement))) {\n            image['galleryImageLoaded'] = true\n            image['srcAfterFocus'] = image[this.minimalQualityCategory]['path']\n        } else {\n            image['srcAfterFocus'] = ''\n        }\n    }\n\n    private isScrolledIntoView(element: any): boolean {\n        const elementTop = element.getBoundingClientRect().top\n        const elementBottom = element.getBoundingClientRect().bottom\n\n        return elementTop < window.innerHeight && elementBottom >= 0 && (elementBottom > 0 || elementTop > 0)\n    }\n\n    private refreshNavigationErrorState(): void {\n        this.leftArrowInactive = this.rowIndex == 0\n        this.rightArrowInactive = this.rowIndex > (this.gallery.length - this.rowsPerPage)\n    }\n}\n","import { ImageService } from '../services/image.service'\nimport { Component } from '@angular/core'\nimport { animate, state, style, transition, trigger } from '@angular/animations'\n\n@Component({\n    selector: 'viewer',\n    templateUrl: './viewer.component.html',\n    styleUrls: ['./viewer.component.css'],\n    host: {\n        '(document:keydown)': 'onKeydown($event)'\n    },\n    animations: [\n        trigger('imageTransition', [\n            state('enterFromRight', style({\n                opacity: 1,\n                transform: 'translate(0px, 0px)'\n            })),\n            state('enterFromLeft', style({\n                opacity: 1,\n                transform: 'translate(0px, 0px)'\n            })),\n            state('leaveToLeft', style({\n                opacity: 0,\n                transform: 'translate(-100px, 0px)'\n            })),\n            state('leaveToRight', style({\n                opacity: 0,\n                transform: 'translate(100px, 0px)'\n            })),\n            transition('* => enterFromRight', [\n                style({\n                    opacity: 0,\n                    transform: 'translate(30px, 0px)'\n                }),\n                animate('250ms 500ms ease-in')\n            ]),\n            transition('* => enterFromLeft', [\n                style({\n                    opacity: 0,\n                    transform: 'translate(-30px, 0px)'\n                }),\n                animate('250ms 500ms ease-in')\n            ]),\n            transition('* => leaveToLeft', [\n                style({\n                    opacity: 1\n                }),\n                animate('250ms ease-out')]\n            ),\n            transition('* => leaveToRight', [\n                style({\n                    opacity: 1\n                }),\n                animate('250ms ease-out')]\n            )\n        ]),\n        trigger('showViewerTransition', [\n            state('true', style({\n                opacity: 1\n            })),\n            state('void', style({\n                opacity: 0\n            })),\n            transition('void => *', [\n                style({\n                    opacity: 0\n                }),\n                animate('1000ms ease-in')]\n            ),\n            transition('* => void', [\n                style({\n                    opacity: 1\n                }),\n                animate('500ms ease-out')]\n            )\n        ])\n    ]\n})\n\nexport class ViewerComponent {\n    showViewer: boolean\n    images: Array<any> = [{}]\n    currentIdx: number = 0\n    leftArrowVisible: boolean = true\n    rightArrowVisible: boolean = true\n    categorySelected: string = 'preview_xxs'\n    transform: number\n    math: Math\n    private qualitySelectorShown: boolean = false\n    private qualitySelected: string = 'auto'\n\n    constructor(private imageService: ImageService) {\n        imageService.imagesUpdated$.subscribe(\n            images => {\n                this.images = images\n            })\n        imageService.imageSelectedIndexUpdated$.subscribe(\n            newIndex => {\n                this.currentIdx = newIndex\n                this.images.forEach(image => image['active'] = false)\n                this.images[this.currentIdx]['active'] = true\n                this.transform = 0\n                this.updateQuality()\n            })\n        imageService.showImageViewerChanged$.subscribe(\n            showViewer => {\n                this.showViewer = showViewer\n            })\n        this.math = Math\n    }\n\n    get leftArrowActive(): boolean {\n        return this.currentIdx > 0\n    }\n\n    get rightArrowActive(): boolean {\n        return this.currentIdx < this.images.length - 1\n    }\n\n    pan(swipe: any): void {\n        this.transform = swipe.deltaX\n    }\n\n    onResize(): void {\n        this.images.forEach(image => {\n            image['viewerImageLoaded'] = false\n            image['active'] = false\n        })\n        this.updateImage()\n    }\n\n    showQualitySelector(): void {\n        this.qualitySelectorShown = !this.qualitySelectorShown\n    }\n\n    qualityChanged(newQuality: any): void {\n        this.qualitySelected = newQuality\n        this.updateImage()\n    }\n\n    imageLoaded(image: any): void {\n        image['viewerImageLoaded'] = true\n    }\n\n    /**\n     * direction (-1: left, 1: right)\n     * swipe (user swiped)\n     */\n    navigate(direction: number, swipe: any): void {\n        if ((direction === 1 && this.currentIdx < this.images.length - 1) ||\n            (direction === -1 && this.currentIdx > 0)) {\n\n            if (direction == -1) {\n                this.images[this.currentIdx]['transition'] = 'leaveToRight'\n                this.images[this.currentIdx - 1]['transition'] = 'enterFromLeft'\n            } else {\n                this.images[this.currentIdx]['transition'] = 'leaveToLeft'\n                this.images[this.currentIdx + 1]['transition'] = 'enterFromRight'\n            }\n            this.currentIdx += direction\n\n            if (swipe) {\n                this.hideNavigationArrows()\n            } else {\n                this.showNavigationArrows()\n            }\n            this.updateImage()\n        }\n    }\n\n    showNavigationArrows(): void {\n        this.leftArrowVisible = true\n        this.rightArrowVisible = true\n    }\n\n    closeViewer(): void {\n        this.images.forEach(image => image['transition'] = undefined)\n        this.images.forEach(image => image['active'] = false)\n        this.imageService.showImageViewer(false)\n    }\n\n    onKeydown(event: KeyboardEvent): void {\n        const prevent = [37, 39, 27, 36, 35]\n            .find(no => no === event.keyCode)\n        if (prevent) {\n            event.preventDefault()\n        }\n\n        switch (prevent) {\n            case 37:\n                // navigate left\n                this.navigate(-1, false)\n                break\n            case 39:\n                // navigate right\n                this.navigate(1, false)\n                break\n            case 27:\n                // esc\n                this.closeViewer()\n                break\n            case 36:\n                // pos 1\n                this.images[this.currentIdx]['transition'] = 'leaveToRight'\n                this.currentIdx = 0\n                this.images[this.currentIdx]['transition'] = 'enterFromLeft'\n                this.updateImage()\n                break\n            case 35:\n                // end\n                this.images[this.currentIdx]['transition'] = 'leaveToLeft'\n                this.currentIdx = this.images.length - 1\n                this.images[this.currentIdx]['transition'] = 'enterFromRight'\n                this.updateImage()\n                break\n            default:\n                break\n        }\n    }\n\n    private hideNavigationArrows(): void {\n        this.leftArrowVisible = false\n        this.rightArrowVisible = false\n    }\n\n    private updateImage(): void {\n        // wait for animation to end\n        setTimeout(() => {\n            this.updateQuality()\n            this.images[this.currentIdx]['active'] = true\n            this.images.forEach(image => {\n                if (image != this.images[this.currentIdx]) {\n                    image['active'] = false\n                    this.transform = 0\n                }\n            })\n        }, 500)\n    }\n\n    private updateQuality(): void {\n        const screenWidth = window.innerWidth\n        const screenHeight = window.innerHeight\n\n        switch (this.qualitySelected) {\n            case 'auto': {\n                this.categorySelected = 'preview_xxs'\n\n                if (screenWidth > this.images[this.currentIdx]['preview_xxs'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xxs'].height) {\n                    this.categorySelected = 'preview_xs'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_xs'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xs'].height) {\n                    this.categorySelected = 'preview_s'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_s'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_s'].height) {\n                    this.categorySelected = 'preview_m'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_m'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_m'].height) {\n                    this.categorySelected = 'preview_l'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_l'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_l'].height) {\n                    this.categorySelected = 'preview_xl'\n                }\n                if (screenWidth > this.images[this.currentIdx]['preview_xl'].width &&\n                    screenHeight > this.images[this.currentIdx]['preview_xl'].height) {\n                    this.categorySelected = 'raw'\n                }\n                break\n            }\n            case 'low': {\n                this.categorySelected = 'preview_xxs'\n                break\n            }\n            case 'mid': {\n                this.categorySelected = 'preview_m'\n                break\n            }\n            case 'high': {\n                this.categorySelected = 'raw'\n                break\n            }\n            default: {\n              this.categorySelected = 'preview_m'\n            }\n        }\n    }\n}\n","import { NgModule } from '@angular/core'\nimport { ImageService } from './services/image.service'\nimport { GalleryComponent } from './gallery/gallery.component'\nimport { ViewerComponent } from './viewer/viewer.component'\nimport { FormsModule } from '@angular/forms'\nimport { CommonModule } from '@angular/common'\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations'\nimport { HttpClientModule } from '@angular/common/http'\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    HttpClientModule,\n    BrowserAnimationsModule\n  ],\n  declarations: [\n    GalleryComponent,\n    ViewerComponent\n  ],\n  providers: [\n    ImageService\n  ],\n  exports: [\n    GalleryComponent,\n    ViewerComponent\n  ]\n})\nexport class Angular2ImageGalleryModule {\n}\n"]},"metadata":{},"sourceType":"module"}